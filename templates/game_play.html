{% extends "base.html" %}
{% block title %}ÛŒØ§Ø±ÛŒ â€” {{ game['title'] if game else 'Game' }}
<script>
  // Force a pre-roll and block input until ad closes
  window.AD_FORCE_PREROLL = true;
  (function(){
    var gate = document.createElement('div');
    gate.id = 'ad-gate-overlay';
    gate.style.cssText = 'position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:9999;display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;font-size:1.2rem;text-align:center';
    gate.innerHTML = '<div style="background:#0b1220;border:1px solid rgba(255,255,255,.15);padding:16px 22px;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.35)"><div>ğŸ¬ Ú•ÛŒÚ©Ù„Ø§Ù…ÛŒ Ø³Û•Ø±Û•ØªØ§ÛŒ ÛŒØ§Ø±ÛŒâ€¦</div><div class="muted" style="font-size:.92rem;margin-top:6px;opacity:.85">ØªÚ©Ø§ÛŒÛ• Ú†Ø§ÙˆÛ•Ú•Û Ø¨Ú©Û• ØªØ§ Ú©Û†ØªØ§ÛŒÛŒ Ú•ÛŒÚ©Ù„Ø§Ù…</div></div>';
    document.addEventListener('DOMContentLoaded', function(){ document.body.appendChild(gate); });
    window.onInterstitialClosed = function(){ try{gate.remove();}catch(e){} };
  })();
</script>

<script src="/static/js/stake_ui.js"></script>
{% endblock %}
{% block content %}
{% if not game %}
<div class="card">ÛŒØ§Ø±ÛŒ Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•.</div>
{% else %}
<div class="grid" style="gap:12px">
<div class="card">
<h2>{{ game['title'] }}</h2>
{% if awarded_points %}
<div class="alert">ğŸ‘ Ù¾Ø§Ø¯Ø§Ø´ØªØª Ø¨Û•Ø¯Û•Ø³Øª Ù‡ÛÙ†Ø§: <strong>{{ awarded_points }}</strong> Ù¾Û†ÛŒÙ†Øª.</div>
{% endif %}
{% if already_awarded %}
<div class="alert">âœ… Ù¾Ø§Ø¯Ø§Ø´ØªØª Ù¾ÛØ´ØªØ± ÙˆÛ•Ø±Ú¯Ø±ØªÙˆÙˆÛ• (Ø¦Û•Ù…Ú•Û†).</div>
{% endif %}
{% if game['embed_url'] %}
<div style="aspect-ratio:16/9; background:#0b1220; border:1px solid var(--border); border-radius:12px; overflow:hidden">
<iframe src="{{ game['embed_url'] }}" style="width:100%; height:100%; border:0" allowfullscreen loading="lazy"></iframe>
</div>
{% else %}
<p class="muted">Ù‡ÛŒÚ† Ù„ÛŒÙ†Ú©ÛÚ©ÛŒ ÛŒØ§Ø±ÛŒ Ø¯Ø§Ù†Û•Ù†Ø±Ø§ÙˆÛ•.</p>
{% endif %}
</div>


<div class="card">
<div class="muted">ØªÛØ¨ÛŒÙ†ÛŒ: Ù¾Ø§Ø¯Ø§Ø´ØªÛŒ ÛŒØ§Ø±ÛŒâ€ŒÚ©Ø±Ø¯Ù† Ø¬Ø§Ø±ÛÚ© Ù„Û• Ú•Û†Ú˜ Ø¯Û•Ø¯Ø±ÛØª.</div>
<a class="btn" href="{{ url_for('games_page') }}">â¬…ï¸ Ú¯Û•Ú•Ø§Ù†Û•ÙˆÛ• Ø¨Û† Ù„ÛŒØ³ØªÛŒ ÛŒØ§Ø±ÛŒÛ•Ú©Ø§Ù†</a>
</div>
</div>
<script src="/static/js/ads.js"></script>
<script>
  // Ø¦Û•Ú¯Û•Ø± adÛŒ Ø³Û•Ø±Û•ØªØ§ÛŒ ÛŒØ§Ø±ÛŒ Ù‡Ø§ØªÙˆÙˆÛ•ØŒ Ù†ÛŒØ´Ø§Ù†Ø¨Ø¯Û• Ùˆ Ù¾Ø§Ø´Ø§Ù† Ù¾Û†ÛŒÙ†Øª Ø¨Û† Ø¨ÛŒÙ†ÛŒÙ†
  if (AD_START){ 
    showInterstitial(AD_START); 
    creditAd({{ game_id }}, AD_START.id);  // â† Ù¾Û†ÛŒÙ†ØªÛÙƒ Ø²ÛŒØ§Ø¯ Ø¯Û•Ø¨ÛØª Ø¨Û† Ø¦Û•Ù†Ø¯Ø§Ù…Û Ù„Û†Ú¯ÛŒÙ†Ø¨ÙˆÙˆ
  }
</script>
</script>
<script>window.AD_GAME_ID={{ game_id if game_id is defined else (game['id'] if game else 0) }};</script>
<script src="/static/js/ad_hooks.js"></script>
{% endif %}

<script>
  // Force a pre-roll and block input until ad closes
  window.AD_FORCE_PREROLL = true;
  (function(){
    var gate = document.createElement('div');
    gate.id = 'ad-gate-overlay';
    gate.style.cssText = 'position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:9999;display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;font-size:1.2rem;text-align:center';
    gate.innerHTML = '<div style="background:#0b1220;border:1px solid rgba(255,255,255,.15);padding:16px 22px;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.35)"><div>ğŸ¬ Ú•ÛŒÚ©Ù„Ø§Ù…ÛŒ Ø³Û•Ø±Û•ØªØ§ÛŒ ÛŒØ§Ø±ÛŒâ€¦</div><div class="muted" style="font-size:.92rem;margin-top:6px;opacity:.85">ØªÚ©Ø§ÛŒÛ• Ú†Ø§ÙˆÛ•Ú•Û Ø¨Ú©Û• ØªØ§ Ú©Û†ØªØ§ÛŒÛŒ Ú•ÛŒÚ©Ù„Ø§Ù…</div></div>';
    document.addEventListener('DOMContentLoaded', function(){ document.body.appendChild(gate); });
    window.onInterstitialClosed = function(){ try{gate.remove();}catch(e){} };
  })();
</script>

<script src="/static/js/stake_ui.js"></script>
{% endblock %}