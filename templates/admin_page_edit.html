<!doctype html>
<html lang="ckb" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>دەستکاری پەڕە — {{ page.title }}</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="bg-dark text-light">
  <div class="container py-4" style="max-width: 980px;">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h4 class="mb-0">دەستکاری پەڕە</h4>
      <div class="d-flex gap-2">
        <a class="btn btn-sm btn-outline-info" target="_blank" href="{{ public_page_url(page.slug) }}">پێشبینین</a>
        <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('admin_pages') }}">گەڕانەوە</a>
      </div>
    </div>

    <form method="post">
      <div class="mb-3">
        <label class="form-label">Slug</label>
        <input class="form-control" value="{{ page.slug }}" disabled>
        <div class="form-text text-secondary">Slug لەناو نیشانی پەڕە بەکاردێت و لێرە ناگۆڕدرێت.</div>
      </div>

      <div class="mb-3">
        <label class="form-label">ناونیشان</label>
        <input class="form-control" name="title" value="{{ page.title }}" required>
      </div>

      <div class="mb-3">
        <label class="form-label">ناوەڕۆک</label>
        <textarea id="page_body" name="html" rows="18">{{ page.html|e }}</textarea>
      </div>

      <button class="btn btn-primary">پاشەکەوت</button>
      <a class="btn btn-outline-light" href="{{ url_for('admin_pages') }}">هەڵوەشاندنەوە</a>
    </form>
  </div>

  <!-- TinyMCE (GPL) — هیچ API-Key پێویست نییە -->
  <script src="https://cdn.jsdelivr.net/npm/tinymce@6.8.3/tinymce.min.js" referrerpolicy="origin"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      tinymce.init({
        selector: '#page_body',
        license_key: 'gpl',
        promotion: false,
        height: 600,
        directionality: 'rtl',
        menubar: 'file edit view insert format table tools help',
        plugins: 'preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help autoresize code table',
        toolbar: 'undo redo | blocks | bold italic underline forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | table tabledelete | link image media | hr codesample | removeformat | preview fullscreen',
        images_upload_url: '{{ url_for("admin_upload_image") }}',
        automatic_uploads: true,
        paste_data_images: true,
        image_advtab: true,
        convert_urls: false,
        branding: false,
        content_style: 'body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans Arabic,Arial;line-height:1.9} img{max-width:100%;height:auto}'
      });
    });
  </script>
</body>
</html>
